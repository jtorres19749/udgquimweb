"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7046],{7046:(P,c,a)=>{a.r(c),a.d(c,{UserPageModule:()=>f});var d=a(177),m=a(4341),s=a(7863),u=a(8573),h=a(467),e=a(4438),g=a(8133);function p(n,o){if(1&n){const i=e.RV6();e.j41(0,"ion-card"),e.nrm(1,"ion-icon",12),e.j41(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content")(6,"ion-label"),e.EFF(7),e.k0s(),e.nrm(8,"br"),e.j41(9,"ion-label"),e.EFF(10),e.k0s(),e.nrm(11,"br"),e.j41(12,"ion-label"),e.EFF(13),e.k0s(),e.nrm(14,"br"),e.j41(15,"ion-label"),e.EFF(16),e.k0s(),e.nrm(17,"br"),e.k0s(),e.j41(18,"ion-button",13),e.bIt("click",function(){const r=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.deleteUser(r))}),e.EFF(19,"Eliminar"),e.k0s()()}if(2&n){const i=o.$implicit;e.R7$(4),e.JRh(i.email),e.R7$(3),e.SpI("Nombre: ",i.name,""),e.R7$(3),e.SpI("Username: ",i.username,""),e.R7$(3),e.SpI("Admin: ",i.admin,""),e.R7$(3),e.SpI("_id: ",i._id,"")}}const U=[{path:"",component:(()=>{var n;class o{setResult(t){console.log(`Dismissed with role: ${t.detail.role}`)}constructor(t){this.alertController=t,this.bdservice=(0,e.WQX)(g.RA),this.isWaiting=!1,this.users=[],this.activeUser={name:"",email:"",_id:""},this.addUserButtons=[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Alert canceled")}},{text:"Aceptar",role:"confirm",handler:r=>{this.addUser(r.name,r.email)}}],this.deleteUserButtons=[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Alert canceled")}},{text:"Aceptar",role:"confirm",handler:()=>{this.deleteUserProceed(this.activeUser)}}],this.alertInputs=[{placeholder:"Nombre",name:"name",label:"Nombre",id:"txtName"},{placeholder:"Email",name:"email",label:"Email",id:"txtEmail"}]}ngOnInit(){this.loadData()}loadData(){this.isWaiting=!0,this.bdservice.getUsers().then(t=>{this.isWaiting=!1,console.log(t),t.hasOwnProperty("data")&&t.results>0&&(this.users=t.data.users)}).catch(t=>{this.isWaiting=!1,console.log(t)})}deleteUser(t){t&&(this.activeUser=t,this.presentAlert("Esta seguro de eliminar a : "+t.email,"Eliminar usuario","",this.deleteUserButtons))}deleteUserProceed(t){this.bdservice.deleteUser(t).then(r=>{console.log(r),this.presentAlert("Se elimino el usaurio de la BD","Eliminaci\xf3n  de usuario"),this.loadData()})}addUser(t,r){t&&r?(r.toLowerCase(),this.users.map(l=>l.email).indexOf(r)>-1?this.presentAlert("El correo ya existe en la lista de usuarios","Alta de usuario","Error de datos"):this.bdservice.postUser({name:t,email:r}).then(l=>{console.log(l),this.presentAlert("Se dio de alta al usuario con correo: "+r,"Alta de usuario"),this.loadData()}).catch(l=>{console.log(l)})):this.presentAlert("Favor de capturar correctamente los campos","Alta de usuario","Error de datos")}presentAlert(t="",r="",l="",v=["Ok"]){var F=this;return(0,h.A)(function*(){yield(yield F.alertController.create({header:r,subHeader:l,message:t,buttons:v})).present()})()}}return(n=o).\u0275fac=function(t){return new(t||n)(e.rXU(s.hG))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-user"]],decls:24,vars:9,consts:[[3,"translucent"],["slot","start"],["slot","end"],["id","addUserButton"],[3,"fullscreen"],["collapse","condense"],["size","large","slot","start"],["id","container"],[4,"ngFor","ngForOf"],["id","spinnercontainer"],["id","spinner","name","bubbles"],["trigger","addUserButton","header","Datos del nuevo usuario",3,"buttons","inputs"],["name","person-circle-outline","slot","start"],["fill","clear",3,"click"]],template:function(t,r){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Usuarios"),e.k0s(),e.j41(6,"ion-buttons",2)(7,"ion-button",3),e.EFF(8,"Agregar usuario"),e.k0s()()()(),e.j41(9,"ion-content",4)(10,"ion-header",5)(11,"ion-toolbar")(12,"ion-buttons",1),e.nrm(13,"ion-menu-button"),e.k0s(),e.j41(14,"ion-title",6),e.EFF(15,"Usuarios"),e.k0s(),e.j41(16,"ion-buttons",2)(17,"ion-button",3),e.EFF(18,"Agregar usuario"),e.k0s()()()(),e.j41(19,"div",7),e.DNE(20,p,20,5,"ion-card",8),e.k0s(),e.j41(21,"div",9),e.nrm(22,"ion-spinner",10),e.k0s(),e.nrm(23,"ion-alert",11),e.k0s()),2&t&&(e.Y8G("translucent",!0),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(10),e.xc7("visibility",r.isWaiting?"hidden":"visible"),e.R7$(),e.Y8G("ngForOf",r.users),e.R7$(),e.xc7("visibility",r.isWaiting?"visible":"hidden"),e.R7$(2),e.Y8G("buttons",r.addUserButtons)("inputs",r.alertInputs))},dependencies:[d.Sq,s.Zy,s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.W9,s.eU,s.iq,s.he,s.MC,s.w2,s.BC,s.ai],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-toolbar[_ngcontent-%COMP%]{display:inline-block}#spinnercontainer[_ngcontent-%COMP%]{background-color:transparent;text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#spinner[_ngcontent-%COMP%]{color:#006120;width:100px;height:100px}"]}),o})()}];let b=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.iI.forChild(U),u.iI]}),o})(),f=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.MD,m.YN,s.bv,b]}),o})()}}]);